import 'dart:io';
import 'package:poke_imc_console/user/imc_calc.dart';
import 'package:poke_imc_console/user/user.dart';

String? command;

void main() async {
  await welcome();
}

Future<void> welcome() async {
  // Mensaje del Inicio
  print('''

â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£€â£€â£ â£¶â£¤â£¶â£¿â£¿â£·â£¶â£¦â£¤â£„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£€â£€â €â¢€â£´â¡¿â¢¿â£¿â£¿â ¿â »â ¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¡„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â °â Ÿâ ‹â£´â£¦â €â¢€â €â €â €â €â €â €â €â €â ™â Ÿâ ›â ›â¢¿â¡Ÿâ ›â ¿â¢¦â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â£¾â£§â €â €â €â €â €â£ â¡–â €â €â¢€â£¸â¡¿â â €â ˜â ¿â£¿â£¶â£¤â£„â£€â¡€â €â €â €â €â €â €â €â €â €â €â ˆâ ™â ²â¢”â£¤â£€â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â£¸â£¿â¡€â €â €â €â¢¸â¡‡â €â¢€â£´â£¿â£¿â ƒâ €â €â €â €â¢€â£¼â£¿â£¿â£¿â£‰â »â£¦â¡€â €â €â €â €â €â €â €â €â €â €â €â ™â ªâ£›â¢¦â£€â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â¢€â£´â£¿â£¿â¡‡â €â €â €â Šâ €â£¶â£¿â£¿â£¿â£¿â €â €â €â €â£´â£¿â£¿â£¿â¡¿â ¿â ¿â¢¿â£¿â£¿â£¿â£·â£„â €â €â €â €â €â €â €â €â €â €â ˆâ ³â¡â¢·â£„â €â €â €â €â €â €
â €â €â €â €â €â €â£´â£¿â Ÿâ ‰â ‰â¢¿â €â €â €â£€â£¼â£¿â£¿â£¿â£¿â£¿â €â €â¢€â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¦â£€â¡™â ¿â ‹â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¢¦â ™â£·â£„â €â €â €â €
â €â €â €â €â €â£¼â Ÿâ â €â €â €â ˆâ£§â¢€â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡€â¢€â£¾â£¿â£¿â£¿â£¿â –â €â €â ‰â ‰â ›â ›â ‹â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢³â¡ˆâ¢¿â£¦â €â €â €
â €â €â €â¢€â¡¾â â €â €â €â €â €â €â ˜â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â£¼â£¿â£¿â£¿â£¿â¡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢£â ˆâ¢¿â£§â €â €
â €â €â£°â¡Ÿâ €â €â €â €â €â €â €â €â €â ˆâ »â£®â£»â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˜â¡†â ˜â£¿â£‡â €
â €â €â¡¿â â €â €â €â €â €â €â €â €â €â €â €â €â ‰â ³â¢¯â£›â£›â£¥â£¿â£¿â£¿â£¿â£¿â£¿â£†â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢·â €â¢¹â£¿â¡„
â €â¢°â ‡â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â£€â£¹â£¿â£¿â£¿â£¿â£¿â¡Ÿâ â €â €â ‰â ‚â¢„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â €â ¸â£¿â¡‡
â €â¡¿â €â €â €â €â €â €â €â €â €â €â €â¢€â£¶â£¾â£¿â ¿â ¿â ¿â£¿â£¿â£¿â£¿â¡¿â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¸â €â €â£¿â£¿
â¢¸â¡‡â €â €â €â¢ â žâ “â¢„â €â €â¢€â£´â£¿â¡Ÿâ¢±â¢†â €â €â¢€â£¿â£¿â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¼â €â €â£¿â£¿
â£¸â¡‡â €â¢€â¡´â â €â €â¢€â£·â£¿â£¿â£¿â£¿â¡€â ƒâ ˆâ €â¢€â¢šâ£¿â£¿â£¿â£¿â â €â €â €â €â €â €â €â €â €â €â¢»â£¦â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢€â¡‡â €â €â£¿â£¿
â£¿â¡‡â¢ â Žâ €â €â €â €â ¸â â ˜â¡¿â ‹â Ÿâ ƒâ €â €â â ƒâ¢¸â£¿â£¿â£¿â£¿â£„â£€â €â €â €â €â €â €â €â €â €â ˜â£¿â£¿â£¦â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¡¼â €â €â¢¸â£¿â¡
â£¿â¡‡â Žâ €â €â €â €â €â €â €â €â €â¢ â¢ â â €â €â €â €â ˆâ¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¦â¡€â €â €â €â €â €â €â €â£¿â£¿â£¿â£¿â¡†â €â €â €â €â €â €â €â €â €â €â €â €â¡¼â â €â¢€â£¿â£¿â ƒ
â¢¹â£·â €â €â €â €â €â €â €â €â €â €â ˆâ£¿â €â €â €â €â €â €â¢‡â¢»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£†â €â €â €â €â €â¢¸â£¿â£¿â£¿â£¿â â €â €â €â €â €â €â €â €â €â €â£ â¡¾â â €â¢€â£¾â£¿â â €
â ˆâ£¿â €â €â €â €â €â €â €â €â €â €â €â ˜â ƒâ €â €â €â €â €â ˜â¡Œâ¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â €â €â €â¢ â£¿â£¿â£¿â£¿â¡ƒâ €â €â €â €â €â €â €â €â¢€â£ â ¾â ‹â €â €â£ â£¿â£¿â¡Ÿâ €â €
â €â ˆâ ƒâ €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ™â£¦â¡™â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¤â£„â¡€â ‰â ™â »â ¿â£·â£¤â£€â£€â£€â£¤â£¤â ¶â žâ ‹â â €â €â¢€â£´â£¿â£¿â â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˜â¢¿â£¶â£â¡›â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â£€â£´â£¿â£¿â¡¿â ƒâ €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ™â¢¿â£¿â£·â£®â£â »â¢¿â£¿â£¿â¡¿â¢¿â¡¿â ¦â €â €â €â €â €â €â €â €â €â£€â£´â£¾â£¿â£¿â ¿â ‹â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ‰â »â¢¿â£¿â£·â£¦â£½â£¿â£·â£¤â£¤â£¦â£¤â£¤â£¤â£¤â£¤â£¤â£¶â£¾â£¿â£¿â£¿â ¿â ›â â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ ‰â ›â ›â ¿â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ¿â ¿â ¿â ›â ‹â ‰â €â €â €â €â €â €â €â €â €â €â €â €

################################################################
###                                                          ###
###                                                          ###
###                Bienvenid@ a Poke-IMC App!                ###
###                                                          ###
###                                                          ###
################################################################
''');

  await User.checkUser();

  showCommand();
}

// Mostrar los comandos
void showCommand() {
  // Inicializar el comando
  command = null;

  print('''

### COMANDOS ðŸ‘‡
### Ver IMC de pokemon(Buscar con el nombre): --b
### Calcular mi IMC: --imc
### Borrar mis datos: --borrar
### Salir: --s

  ''');

  // Comando input prompt
  if (command == null) {
    do {
      stdout.write('> ');
      command = stdin.readLineSync()!.trim();
    } while (!RegExp(r'^--[a-z]+$').hasMatch(command!));
    exeCommand(command!);
  } else {
    exeCommand(command!);
  }
}

// Ejecutar el comando
void exeCommand(String command) {
  switch (command) {
    case '--b':
      print('Buscar IMC del pokemon por nombre');
      break;
    case '--imc':
      print('Calcular mi IMC');
      ImcCalculator.getMyImc();
      break;
    case '--s':
      print('''

### Â¡Hasta luego! (Ê˜â€¿Ê˜)â•¯    
                                    
  ''');
      break;
    case '--borrar':
      User.deleteUserData();
      break;
    default:
      print('Comando incorrecto. Reintenta por favor.');
      showCommand();
  }
}
